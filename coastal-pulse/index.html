<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coastal Pulse - Aetherwave Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
	#track-stripe-form {
    max-width: 400px;
    margin: 20px auto;
}
#track-card-element {
    background-color: #1E1E2F;
    border: 1px solid #A6EFFF;
    color: #F4F4F4;
    padding: 10px;
    border-radius: 5px;
}
.StripeElement {
    background-color: #1E1E2F;
    color: #F4F4F4;
    padding: 10px;
}
#track-submit {
    margin-top: 10px;
}
        body { margin: 0; padding: 0; font-family: 'Open Sans', sans-serif; background-color: #2C003E; color: #F4F4F4; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        header { text-align: center; padding: 40px 0; }
        .logo { font-family: 'Orbitron', sans-serif; font-size: 2.5em; color: #e15afd; margin-bottom: 10px; }
        .tagline { font-size: 1.2em; color: #A6EFFF; }
        .hero { text-align: center; padding: 60px 0; }
        .hero h1 { font-family: 'Orbitron', sans-serif; font-size: 3em; color: #00F5A0; margin-bottom: 20px; }
        .hero p { font-size: 1.2em; max-width: 800px; margin: 0 auto 40px; color: #F4F4F4; }
        .features { display: flex; justify-content: space-around; flex-wrap: wrap; margin-bottom: 60px; }
        .feature { flex: 1 1 300px; margin: 20px; text-align: center; }
        .feature h3 { font-family: 'Orbitron', sans-serif; color: #e15afd; font-size: 1.5em; }
        .track-list { background-color: #1E1E2F; padding: 40px; border-radius: 10px; margin-bottom: 60px; }
        .track-list h2 { font-family: 'Orbitron', sans-serif; color: #A6EFFF; text-align: center; margin-bottom: 30px; }
        .track-list ul { list-style: none; padding: 0; max-width: 600px; margin: 0 auto; }
        .track-list li { font-size: 1.1em; margin-bottom: 10px; color: #F4F4F4; display: flex; justify-content: space-between; align-items: center; }
        .play-sample { background-color: #00F5A0; color: #2C003E; font-family: 'Open Sans', sans-serif; font-size: 0.9em; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        .play-sample:hover { background-color: #e15afd; }
        .download-btn { background-color: #00F5A0; color: #2C003E; font-family: 'Orbitron', sans-serif; font-size: 1.2em; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; text-decoration: none; display: inline-block; margin-left: 10px; }
        .download-btn:hover { background-color: #e15afd; }
        .cta { text-align: center; padding: 60px 0; background-color: #1E1E2F; }
        .cta h2 { font-family: 'Orbitron', sans-serif; color: #00F5A0; margin-bottom: 20px; }
        .cta p { font-size: 1.2em; margin-bottom: 40px; }
        #stripe-form { max-width: 400px; margin: 0 auto; }
        .buy-button { background-color: #e15afd; color: #2C003E; font-family: 'Orbitron', sans-serif; font-size: 1.2em; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        .buy-button:hover { background-color: #00F5A0; }
        .code-input { width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #A6EFFF; border-radius: 5px; background-color: #1E1E2F; color: #F4F4F4; font-size: 1em; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); justify-content: center; align-items: center; }
        .modal-content { background-color: #1E1E2F; margin: auto; padding: 20px; border: 1px solid #e15afd; width: 80%; max-width: 500px; border-radius: 10px; text-align: center; }
        .close { color: #A6EFFF; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover, .close:focus { color: #00F5A0; text-decoration: none; }
        audio { width: 100%; margin-top: 20px; }
    </style>
    <script src="https://js.stripe.com/v3/"></script>
</head>

<div id="track-download-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h3 id="track-download-title" style="font-family: 'Orbitron', sans-serif; color: #e15afd;">Download Track</h3>
        <p>Pay $1.99 to download this track's ZIP file.</p>
        <div id="track-stripe-form">
            <div id="track-card-element"></div>
            <button id="track-submit" class="buy-button">Purchase</button>
            <div id="track-card-errors" role="alert"></div>
        </div>
        <a id="track-download-link" class="download-btn" style="display: none;">Download Now</a>
    </div>
</div>


<body>
    <header>
        <div class="container">
            <div class="logo">Aetherwave Studio</div>
            <div class="tagline">AI Music. Human Soul. Infinite Sound.</div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1 id="playlist-title">Coastal Pulse</h1>
            <p id="playlist-description">Immerse yourself in the rhythmic waves of binaural beats designed to elevate your focus, relaxation, and creativity. This 12-track collection blends AI precision with human intuition, creating soundscapes that transport you to serene coastal realms. Perfect for meditation, work, or unwinding—experience the pulse of the ocean in every beat.</p>
        </div>
    </section>

    <section class="features">
        <div class="container">
            <div class="feature">
                <h3>Binaural Magic</h3>
                <p>Engineered frequencies to sync your brainwaves for deeper states of mind.</p>
            </div>
            <div class="feature">
                <h3>AI + Human Craft</h3>
                <p>Powered by cutting-edge AI, refined with a human touch for authentic vibes.</p>
            </div>
            <div class="feature">
                <h3>Infinite Replay</h3>
                <p>High-quality audio files ready for your playlist—endless inspiration awaits.</p>
            </div>
        </div>
    </section>

    <section class="track-list">
        <div class="container">
            <h2>Track List</h2>
            <ul id="track-list"></ul>
        </div>
    </section>

    <section class="cta">
        <div class="container">
            <h2>Get Your Copy Now</h2>
            <p id="playlist-price">For just $9.99, unlock the full collection and dive into infinite sound. Secure payment powered by Stripe. Or enter a promo code for free access.</p>
            <div id="stripe-form">
                <form id="payment-form">
                    <input type="text" id="promo-code" class="code-input" placeholder="Enter promo code (optional)">
                    <div id="card-element"></div>
                    <button class="buy-button" id="submit">Purchase Now</button>
                    <div id="card-errors" role="alert"></div>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            &copy; 2025 Aetherwave Studio. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
            <br>Created by Andrew Froehlich, CEO Aetherwave Studio & Founder, The AI Music Report
        </div>
    </footer>

    <div id="sampleModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 style="font-family: 'Orbitron', sans-serif; color: #e15afd;">30-Second Sample</h3>
            <audio controls id="sampleAudio">
                <source src="" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
    </div>

    <div id="downloadModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 style="font-family: 'Orbitron', sans-serif; color: #e15afd;">Download Ready!</h3>
            <p>Your Coastal Pulse collection is ready. Click below to download the full ZIP file.</p>
            <a id="download-link" class="download-btn">Download Now</a>
        </div>
    </div>

    <script>
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzdtU3oKL4ajOSRTkzZzO7JTq2TU8QYO6W7rlZvGk7SZuf3uEj6E1P7YLgxkfbj-iMY/exec'; // Replace with your deployed URL

    // Fetch and populate playlist data
    fetch(WEB_APP_URL)
        .then(response => {
            if (!response.ok) throw new Error('Failed to fetch playlist data');
            return response.json();
        })
        .then(data => {
            if (data.error) throw new Error(data.error);

            document.getElementById('playlist-title').textContent = data.title || 'Coastal Pulse';
            document.getElementById('playlist-description').textContent = data.description || 'Immerse yourself in the rhythmic waves...';
            document.getElementById('playlist-price').textContent = `For just ${data.price || '$9.99'}, unlock the full collection.`;

            const trackList = document.getElementById('track-list');
            trackList.innerHTML = '';
            data.tracks.forEach(track => {
                const li = document.createElement('li');
                li.innerHTML = `<img src="${track.cover_art || ''}" alt="${track.title} cover" style="width: 50px; height: 50px; margin-right: 10px; vertical-align: middle;"> ${track.title} <button class="play-sample" data-src="${track.sample || ''}">Play Sample</button> <a href="#" class="download-btn track-download" data-track-id="${track.id}" style="margin-left: 10px;">Download Track ZIP ($1.99)</a>`;
                trackList.appendChild(li);
            });

            document.getElementById('download-link').href = data.zip_download || '';
            attachPlayListeners();
            attachDownloadListeners(data.tracks);
        })
        .catch(error => {
            console.error('Error loading playlist:', error);
            document.getElementById('playlist-title').textContent = 'Error Loading Playlist';
        });

    // Helper functions
    function attachPlayListeners() {
        document.querySelectorAll(".play-sample").forEach(button => {
            button.addEventListener("click", () => {
                const src = button.getAttribute("data-src");
                const audio = document.getElementById("sampleAudio");
                audio.src = src;
                audio.load();
                document.getElementById("sampleModal").style.display = "flex";
                audio.play();
            });
        });
    }

    function attachDownloadListeners(tracks) {
        document.querySelectorAll(".track-download").forEach(link => {
            link.addEventListener("click", (e) => {
                e.preventDefault();
                const trackId = link.getAttribute("data-track-id");
                const track = tracks.find(t => t.id == trackId);
                if (track && track.download) {
                    document.getElementById("track-download-modal").style.display = "flex";
                    document.getElementById("track-download-link").href = track.download;
                    document.getElementById("track-download-title").textContent = track.title;
                    // Here you would typically initiate a Stripe checkout session
                    // For now, simulate with a placeholder
                    console.log(`Initiating Stripe for ${track.title} at ${track.download}`);
                    // Replace with actual Stripe client-side checkout
                }
            });
        });
    }

    // Stripe and Modal Logic
    var stripe = Stripe('pk_live_your_publishable_key_here'); // Replace with live
var elements = stripe.elements();
var card = elements.create('card', {
    style: {
        base: {
            color: '#F4F4F4',
            backgroundColor: '#1E1E2F',
            fontFamily: 'Open Sans, sans-serif',
            fontSize: '16px',
            '::placeholder': { color: '#A6EFFF' }
        }
    }
});
card.mount('#card-element');
card.mount('#track-card-element');

    var form = document.getElementById('payment-form');
    var promoCodeInput = document.getElementById('promo-code');
    var promoCode = 'FREECOASTAL';
    var downloadModal = document.getElementById('downloadModal');
    var sampleModal = document.getElementById('sampleModal');
    var trackDownloadModal = document.getElementById('track-download-modal');
    var closeButtons = document.querySelectorAll('.close');

    form.addEventListener('submit', (event) => {
        event.preventDefault();
        var enteredCode = promoCodeInput.value.trim();

        if (enteredCode === promoCode) {
            downloadModal.style.display = 'flex';
        } else {
            stripe.createToken(card).then(result => {
                if (result.error) {
                    document.getElementById('card-errors').textContent = result.error.message;
                } else {
                    console.log('Token created: ' + result.token.id);
                    downloadModal.style.display = 'flex'; // Show full ZIP
                }
            });
        }
    });

    closeButtons.forEach(closeBtn => {
        closeBtn.onclick = () => {
            if (closeBtn.parentElement.parentElement.id === 'downloadModal') {
                downloadModal.style.display = 'none';
            } else if (closeBtn.parentElement.parentElement.id === 'sampleModal') {
                sampleModal.style.display = 'none';
                document.getElementById('sampleAudio').pause();
                document.getElementById('sampleAudio').currentTime = 0;
            } else if (closeBtn.parentElement.parentElement.id === 'track-download-modal') {
                trackDownloadModal.style.display = 'none';
            }
        };
    });

    window.onclick = (event) => {
        if (event.target == sampleModal) {
            sampleModal.style.display = 'none';
            document.getElementById('sampleAudio').pause();
            document.getElementById('sampleAudio').currentTime = 0;
        } else if (event.target == downloadModal) {
            downloadModal.style.display = 'none';
        } else if (event.target == trackDownloadModal) {
            trackDownloadModal.style.display = 'none';
        }
    };
</script>
</body>

</html>

